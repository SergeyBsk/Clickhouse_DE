# Домашнее задание 1: Адаптация ClickHouse

**Студент:** Баскаков Сергей

### Пример 1. IoT-мониторинг энергопотребления вышек сотовой связи

**Компания:** МТС

**Специфика проекта:** Система телеметрии и мониторинга инфраструктуры (Infrastructure IoT).

**Бизнес-потребность:**
У компании сотни тысяч базовых станций (БС) по всей стране. Каждая станция потребляет электричество, работает от сети или акб(при авариях).
*   **Проблема:** Сложно отслеживать аномалии потребления (хищения энергии, неэффективное оборудование, утечки), трудно планировать бюджет на электричество без точных исторических данных.
*   **Задача:** Собирать метрики напряжения, силы тока и потребляемой мощности с каждой базовой станции каждые 10-30 секунд для построения прогнозов и алертинга.

**Особенности внедрения и архитектуры:**
*   **Поток данных:** Данные с контроллеров на площадках поступают в Kafka, откуда вычитываются в ClickHouse.
*   **Сжатие данных:** Поскольку метрики меняются слабо, используемые кодеки сжатия в ClickHouse позволят сжать данные в 10-20 раз эффективнее, чем в обычных БД.
*   **Агрегация:** Используются **Materialized Views**. Сырые данные ("вольтаж каждую секунду") хранятся 2 недели для детального разбора аварий, а агрегаты ("среднее потребление в час по региону") — годами для финансовой аналитики.
*   **Результат:** Оперативное выявление "прожорливых" площадок и экономия бюджета на электро-энергию за счет предиктивного ремонта.

### Пример 2. Анализ NetFlow и DPI логов
**Компания:** МТС

**Специфика проекта:** Аналитика интернет-трафика абонентов для маркетинга и планирования сети.

**Бизнес-потребность:**
Необходимо понимать, какими сервисами пользуются абоненты (youtube, telegram, tiktok), чтобы создавать тарифы например "безлимитные соцсети" и понимать где нужно расширять пропускную способность каналов. Объем данных - миллиарды записей в сутки.

**Особенности внедрения и архитектуры:**
*   Производительность: Кликхаус позволяет делать выборки типа "Топ-10 приложений по трафику в регионе Москва за последний месяц" за секунды.
*   Сэмплирование: Для некоторых отчетов не обязательно читать все данные, потеряв менее 1% точности можно ускорить запрос многократно.

---

## Ответы на вопросы

**1. К каким классам систем относится ClickHouse?**

ClickHouse относится к классу аналитических (OLAP) колоночных СУБД реального времени.

**2. Какую проблему вы бы решили используя ClickHouse, а какую бы не стали?**

**Решил бы с помощью ClickHouse:**
*   Построение аналитических отчетов (годовые/месячные отчеты) на больших объемах данных.
*   Хранение и анализ логов серверов или событий приложений (User Events).
*   Задачи, требующие сканирования большого количества строк, но выбора малого количества колонок (широкие таблицы).
*   Хранение метрик (Time Series данные).

**НЕ стал бы решать (или решал бы с осторожностью):**
*   **OLTP задачи:** Транзакционная обработка (банковские переводы), где важна строгая консистентность и частые точечные изменения.
*   **Частые точечные обновления/удаления:** ClickHouse плохо подходит для сценариев, где нужно постоянно делать UPDATE или DELETE отдельных строк (это тяжелые операции мутаций).


**3. Где можно получить помощь по ClickHouse и куда сообщать о багах?**
*   **Помощь:** В официальном русскоязычном Telegram-чате: `https://t.me/clickhouse_ru`.
*   **Баги:** В Issues на GitHub: `https://github.com/ClickHouse/ClickHouse`.
*   **Документация:** На официальном сайте `https://clickhouse.com/docs`.
